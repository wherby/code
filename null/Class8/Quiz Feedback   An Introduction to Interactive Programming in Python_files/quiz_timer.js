function Quiz_Timer(l_end_time,duration_callback){function format_duration(duration){var hours,minutes,seconds,hours_str,minutes_str,seconds_str;if(hours=Math.floor(duration/3600),minutes=Math.floor(duration%3600/60),seconds=duration%60,0===hours)hours_str="";else hours_str=hours.toString(),hours_str+=":";if(60>duration)minutes_str="";else{if(minutes_str=minutes.toString(),hours>0)if(1==minutes_str.length)minutes_str="0"+minutes_str;minutes_str+=":"}if(seconds_str=seconds.toString(),duration>=60){if(1==seconds_str.length)seconds_str="0"+seconds_str}else seconds_str+="s";if(0>=duration)return"Time is up";else return hours_str+minutes_str+seconds_str}function update(){var time_remaining;if(time_remaining=end_time-Math.floor((new Date).getTime()/1e3),time_remaining_div.text(format_duration(time_remaining)),time_remaining>0)setTimeout(update,1e3);duration_callback(time_remaining)}function initialize(){timer_div=$("<div></div>").attr("id","course-quiz-timer"),header_div=$("<div></div>").text("Time remaining").css("text-align","center").css("font-weight","bold"),timer_div.append(header_div),time_remaining_div=$("<div></div>").text("-").css("text-align","center"),timer_div.append(time_remaining_div),$("body").append(timer_div),setTimeout(update,1e3)}var end_time,timer_div,header_div,time_remaining_div;end_time=l_end_time,initialize()}