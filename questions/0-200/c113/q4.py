import math
from collections import defaultdict
class DSU:
    def __init__(self,N):
        self.p  = list(range(N))
        self.rank = [1]*N
    
    def find(self,x):
        if self.p[x] != x:
            self.p[x] =self.find(self.p[x])
        return self.p[x]
    
    def union(self,x,y):
        xr = self.find(x)
        yr = self.find(y)
        if self.rank[xr] <self.rank[yr]:
            xr,yr =yr,xr
        
        self.p[yr] = xr
        if self.rank[xr] == self.rank[yr]:
            self.rank[xr] += 1
class Solution(object):
    def largestComponentSize(self, nums):
        """
        :type nums: List[int]
        :rtype: int
        """
        n= len(nums)
        dsu = DSU(10**6+1)
        dic = {}
        for i,a in enumerate(nums):
            dic[a] =i
        def getPrimes(n):
            visited = [0]*(n+1)
            for i in range(2,int(math.sqrt(n))+1):
                if visited[i] ==0:
                    for j in range(i+i,n+1,i):
                        visited[j] =1
            prims =[]
            for i in range(2,n+1):
                if visited[i] ==0:
                    prims.append(i)
            return prims
        pls = getPrimes(2000)
        for x in nums:
            xt = x
            for p in pls:
                if xt%p ==0:
                    if dsu.find(x) != dsu.find(p):
                        dsu.union(x,p)
                    while xt %p ==0:
                        xt = xt//p
            if xt >1:
                if dsu.find(x) != dsu.find(xt):
                    dsu.union(x,xt)
        dic2 = defaultdict(int)
        for i in range(n):
            k = dsu.find(nums[i])
            dic2[k] +=1
        return max(dic2.values())

#re =Solution().largestComponentSize([5803,6153,13,2062,6161,2068,7172,8219,6174,2080,36,4138,6188,8237,46,8240,8242,4151,6202,8253,8269,2126,6226,2135,4187,97,102,9233,6263,126,3776,2178,4233,8330,9581,8342,152,6297,5487,4253,8350,2208,6308,4262,4263,6314,1053,8373,184,4281,2242,8388,6346,6352,2258,6355,2261,2084,4815,6365,2270,225,4330,4333,6525,4341,6390,3455,4355,262,8456,6410,2318,6873,4379,6435,297,2439,302,2364,2372,334,4431,2387,340,8590,345,2400,8548,6508,367,4466,371,6516,2429,2662,391,2442,8589,398,8595,2452,4506,415,2467,8612,8615,4525,6578,8627,4535,2489,445,4542,447,8644,4558,629,6611,4567,6564,6620,4582,6638,496,4596,2549,4605,513,6660,8714,4620,2579,2585,6685,544,4644,557,8816,6717,8767,6723,2628,582,4679,3853,4689,2643,599,4700,614,8807,618,4882,6768,626,4724,2677,2689,642,4740,6790,4749,158,8848,5913,4769,2724,2730,4779,8897,717,2206,719,2769,8916,6871,4825,2788,8934,6890,751,6898,4855,2811,8960,4915,8967,4877,786,2835,2843,2848,6945,2851,8997,2856,6958,6961,9011,9012,9014,6976,4931,4932,842,7309,4947,9046,7001,2910,9055,2917,1169,7017,874,7655,9072,2931,9078,2935,9024,7044,9103,912,9105,923,5021,7071,1520,5029,2982,5033,2987,7089,7667,2997,950,7533,7096,954,6033,5059,970,9719,973,3023,1669,5075,3034,2895,5084,9181,7141,7142,3050,9196,7150,9201,1015,5116,9220,9223,3083,1036,1041,175,7197,1055,1057,3108,3109,7212,3123,5173,7223,1081,7007,1085,3143,9293,5424,5205,1893,7266,1128,9325,1146,1157,5258,9357,1166,9361,7325,9385,9392,7346,3254,1208,5309,9412,9416,5321,1229,7374,1238,5339,9436,5344,1254,9451,5368,3326,5376,1282,2945,3341,3343,7440,7441,1298,3348,5397,5398,3351,3633,5416,7465,3975,1325,3376,1335,3385,9536,7492,5445,3399,3402,3408,5462,9559,9934,5474,1383,3437,7535,9593,9597,1406,5503,7555,5511,3464,1423,7568,7570,3651,7573,3481,1437,7589,3496,9649,5559,9665,1474,7627,1487,7632,1495,5592,9126,3558,593,7657,9708,3568,5618,595,3575,5625,3583,1536,1537,5634,9131,7685,5646,3601,1556,7705,9757,1572,9777,3635,7736,5692,9795,3656,7773,6758,7783,7792,9842,9847,1667,7813,8813,9873,1682,1683,9880,1648,9899,3756,1710,5811,3769,9916,7114,4725,1728,9924,5835,3790,4387,740,7906,5859,1778,3828,3830,1784,9983,1799,9994,5901,1807,1810,5909,8836,1818,5919,5921,1827,7978,5931,3900,1853,7998,3907,8005,8012,3925,8030,3935,3940,5989,8038,3730,5998,3953,8054,1914,6020,6023,1931,1934,6031,8080,1688,8516,1955,4006,4007,6059,6064,1981,4037,6087,1999,2002,4054,8159,4072,6124,2032,4083,2037,8186])
re = Solution().largestComponentSize([2048,6155,8209,2071,4120,8222,31,32,4137,42,43,4144,4148,2114,8261,70,75,2130,2867,95,8288,6243,100,2152,8298,2158,2161,6265,8314,2172,4221,6279,2185,3778,142,8341,163,8356,8359,173,8366,8379,2237,2245,198,8392,4299,4303,210,6356,2275,2280,8425,2282,7207,2288,6386,8435,2292,4341,4344,6400,2306,4364,6413,4366,6426,2335,6433,2340,293,6442,300,4400,1758,8502,8515,6470,2375,8520,2382,4434,4435,4437,8537,2397,8545,356,6503,4456,8553,6511,2420,374,2441,4162,2446,8602,6557,6561,419,8618,4525,4530,2491,3148,4557,2511,4562,9294,8662,2521,8666,494,4592,6641,498,9983,508,2566,1452,4621,6671,6676,8730,4635,4638,4640,545,2603,556,4653,6710,6716,5557,6722,2631,4691,6765,624,2680,2683,4732,642,4742,2696,651,661,680,9388,2730,6829,8882,2743,696,699,4801,8900,4809,714,6867,2772,2169,6874,4827,4828,6880,737,6907,766,2518,2825,8972,2830,6931,8980,791,795,2522,6942,2848,2853,2865,6961,2866,4915,6965,6968,825,2875,9022,4928,833,837,6983,9034,4943,6992,2898,4238,855,7000,857,9050,7003,9052,827,7017,3220,901,906,9113,2885,2987,2988,943,7089,7090,5048,5760,7100,5053,5066,7115,5068,3026,9178,9182,1002,7149,1006,7154,1016,9215,5125,5129,5134,5135,5138,7187,9237,7192,1540,2906,9249,1567,5297,860,7210,5167,1084,1085,9278,5183,5196,3150,6669,9296,3156,1115,3172,9325,9405,3185,3262,5238,3192,7302,7308,7314,5267,7316,5269,9366,3229,7327,5287,1192,1196,9391,1201,1203,5301,3257,7711,1213,9406,9412,7368,3276,7377,9433,7386,5339,9449,5355,5361,3318,1272,3322,5373,9473,7426,3337,3338,9492,1306,5403,9512,8091,7730,5422,1329,9526,1336,5159,9531,7485,9541,1350,7507,3413,9559,9562,5469,1380,1384,5486,9585,5491,7543,9595,1404,9598,3456,7559,1418,3468,1428,5017,9635,5547,5548,3501,9653,7607,5561,2293,1474,1478,9672,5579,7634,7635,3540,9685,5590,1499,1503,1506,1519,5715,5620,5629,5632,1538,7683,3588,9741,9742,5650,1555,9752,1565,3615,474,1572,9765,6065,3629,1586,9781,1596,7745,3653,9798,3655,7754,3661,1618,1619,3670,5719,9146,5737,5742,6077,1649,7794,5751,7801,7806,1664,3723,1677,3726,7825,9879,7834,4720,5801,9898,5803,3765,5819,1727,5825,9922,1738,3791,7890,9945,9949,9950,3807,1760,9955,5868,3824,3825,3830,9980,9982,5887,5889,1797,5896,6402,5902,3859,1833,1847,3896,1849,7994,3899,2890,8000,3905,1858,3916,8025,858,5997,8049,1907,8065,1925,9198,6043,3996,1950,8095,1952,1956,8102,8104,6060,8113,1970,1973,1974,4025,8123,1981,6437,6091,4056,4057,8156,4065,3411,2038,4092,8190])
print(re)
print(1000 **2)